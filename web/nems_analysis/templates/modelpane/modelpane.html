<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head 
    content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- TODO: Keep this title? -->
    <title> NEMS Modelpane </title>

    <!-- Bootstrap css -->
    <link rel="stylesheet" href=
    "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" 
    crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href=
    "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" 
    integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" 
    crossorigin="anonymous">
    
    <!-- Custom styles for this template -->
    <link href="{{ url_for('static', filename='css/modelpane/modelpane.css') }}" rel="stylesheet">
    
    <!-- load jquery -->
    <script type=text/javascript src=
        "{{ url_for('static', filename='js/jquery-3.2.1.min.js') }}"></script>
        
    <!-- Bootstrap JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" 
    integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" 
    crossorigin="anonymous"></script>
    
    <!-- modelpane-specific javascript -->
    <script type="text/javascript">
        $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};</script>
    <script type="text/javascript" src=
        "{{ url_for('static',filename='js/modelpane/modelpane.js') }}">
    </script>
    
  </head>
  <body>
    <div class="container-fluid">
    <div class="starter-template">
    
        <h2>{{ title }}</h2>
        
        <div class="row">
        
        <div class="col-xs-2">
        <form class="form" id="removeModule" method="POST">
            <div class="form-group">
                <label for="moduleRemove"> Remove Module </label>
                <select class="form-control" id="moduleRemove" name="r_module">
                {% for module in modules %}
                    <option value="{{ module }}"> {{ module }} </option>
                {% endfor %}
                </select>
                
                <input type="checkbox" name="all_idx" value="1" disabled> All
                
                <button class="form-group-btn" type="Submit" form="removeModule"
                formaction="{{ url_for('remove_module') }}"> Submit
                </button>
            </div>
        </form>
        </div><!-- end col -->
        
        <div class="col-xs-2">
        <form class="form"id="appendOrInsert" method="POST">
        
            <div class="form-group">
                <label for="moduleSelect"> Select Module </label>
                <select class="form-control" id="moduleSelect" name="a_module">
                {% for mod in all_mods %}
                    <option value="{{ mod }}"> {{ mod }} </option>
                {% endfor %}
                </select>
            </div>
                
            <div class="form-group">
                <label for="idx" id="idxLabel"> Insertion Index </label>
                <input type="text" class="form-control" 
                value={{ modules|length }} name="idx" id="idx" disabled>
            </div>
                
            <div class="form-group">
                <button class="form-group-btn" type="Submit" form="appendOrInsert"
                formaction="{{ url_for('append_module') }}" name="append"> 
                Append Module
                </button>
                <button class="form-group-btn" type="Submit" form="appendOrInsert"
                formaction="{{ url_for('insert_module') }}" name="insert" disabled> 
                Insert Module
                </button>
            </div>
            
        </form>
        </div><!-- end col -->
        
        <div class="col-xs-8" id="blankDivForSpacing">
        </div>
        
        </div><!-- end row -->
        
        
    {% for module in modules %}

        <h4 text-align="left" align="left">
        <button class="btn-default" data-toggle="collapse"
        data-target="#{{ module }}" aria-expanded="true">
        Toggle {{ module }} </button>
        </h4>
        
        <div class="row collapse.show collapse in" id="{{ module }}">
        
            <div class="col-xs-4">
            
                <div class="control-group" align="left">
                    <label for="plotSelect{{ loop.index-1 }}"> Plot Type </label>
                    <select class="plotSelect form-control" id=
                    "plotSelect{{ loop.index-1 }}">
                    {% for type in plottypes[loop.index-1] %}
                        <option> {{ type }} </option>
                    {% endfor %}
                    </select>
                </div><!-- control-group -->
                
                <br/>
                <div class="control-group" align="left" id="editableFields">
                    <label for="selectPreset"> Keyword Preset </label>
                    <select class="form-control" id="selectPreset">
                        {% for kw in keywords[loop.index-1] %}
                        <option value="{{ kw }}"> {{ kw }} </option>
                        {% endfor %}
                    </select>
                    <span class="lbl"> <strong>Editable Fields</strong> </span>
                    {% for field in fields[loop.index-1] %}
                    <div class="input-group">
                        <span class="input-group-addon">
                            <input type="checkbox" checked>
                        </span>
                        <span class="input-group-addon"> {{ field }} </span>
                        <input type="text" class="form-control" placeholder=
                        "{{ field }}" id="{{ loop.index-1 }}{{ field }}">
                    </div>
                    {% endfor %}
                </div>
                
                <div class="control-group" align="right">     
                    <label class="checkbox">
                        <input type="checkbox"> Test1
                    </label>
                    <label class="checkbox">
                        <input type="checkbox"> Test1
                    </label>
                    <button type="button"
                    class="submitModulesChanges"> Submit </button>
                </div>
            </div><!-- end col -->
            
            <div class="col-xs-8">
            
                <div class="plot-wrapper" id="plot{{ loop.index-1 }}">
                    {{ plots[loop.index-1]|safe }}
                </div> <!-- plot-wrapper -->

            </div><!-- end col -->
        </div><!-- end row -->
  
    {% endfor %}
    
    </div> <!-- end starter-template -->
    </div> <!-- end container -->

  </body>
</html>